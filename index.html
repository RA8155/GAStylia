<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Google Analytics 4 - Interactivo</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script> <!-- Uso de Lucide Icons para mejor control --><style>
        /* Tipografía Inter, similar a la utilizada por Google */
        :root {
            font-family: 'Inter', sans-serif;
            --ga-blue: #1a73e8;
            --ga-light-gray: #f1f3f4;
            --ga-text-gray: #5f6368;
            --ga-red: #d93025;
            --ga-green: #1e8e3e;
        }
        /* Estilos personalizados para el scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-thumb { background-color: #c4c4c4; border-radius: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }

        /* Clase para el enlace activo en el menú */
        .active-link {
            background-color: #e8f0fe; /* Azul muy claro */
            color: var(--ga-blue);
            font-weight: 500;
            border-left-width: 4px;
            border-left-color: var(--ga-blue);
        }
        .active-link .lucide {
            color: var(--ga-blue);
        }
        
        /* Oculta la barra lateral en móvil */
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            .main-content {
                padding-left: 0;
            }
        }
        /* Clase de utilidad para las barras simuladas */
        .realtime-bar {
            width: 4px; 
            background-color: var(--ga-blue); 
            margin-right: 2px; 
            border-radius: 2px;
        }

        /* Estilo para el contenedor del gráfico principal */
        .chart-container {
            border: 1px solid #dadce0;
            border-radius: 8px;
            overflow: hidden;
            background-color: white;
            padding-bottom: 24px;
        }

        /* Estilos para el mapa simulado */
        .map-container {
            width: 100%;
            height: 150px; /* Altura fija para la simulación del mapa */
            background-color: #e0f2f7; /* Color base del mapa */
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #607d8b; /* Color para el texto placeholder */
            font-size: 0.875rem;
            text-align: center;
            border: 1px solid #c8e6c9; /* Borde verde claro */
        }
        .map-container::before {
            content: "Mapa Global Simulado";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #b0bec5;
            font-weight: 500;
        }
        /* Colores de celda para la cohorte */
        .cohort-cell-bg-0 { background-color: #f8f9fa; }
        .cohort-cell-bg-1 { background-color: #e8f0fe; }
        .cohort-cell-bg-2 { background-color: #c6dafc; }
        .cohort-cell-bg-3 { background-color: #8ab4f8; }
        .cohort-cell-bg-4 { background-color: #4285f4; }
        .cohort-cell-bg-5 { background-color: #1a73e8; }
        .cohort-cell-text { color: #5f6368; }
        .cohort-cell-text-dark { color: #202124; }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ga-blue': 'var(--ga-blue)',
                        'ga-light-gray': 'var(--ga-light-gray)',
                        'ga-text-gray': 'var(--ga-text-gray)',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 flex flex-col h-screen overflow-hidden">

    <!-- Encabezado (Header) --><header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-10 shadow-sm">
        <div class="flex items-center">
            
            <!-- Logo de Analytics --><div class="flex items-center space-x-2 mr-6 cursor-pointer hover:bg-gray-100 p-2 rounded-full">
                <div class="w-8 h-8 flex items-center justify-center">
                    <!-- Placeholder con fallback --><img src="https://raw.githubusercontent.com/RA8155/STYLIA/refs/heads/main/GA4.jpg" 
                         alt="Logo GA4" 
                         onerror="this.onerror=null; this.src='https://placehold.co/32x32/1a73e8/ffffff?text=GA4';"
                         class="w-full h-full object-contain">
                </div>
                <span class="text-xl font-medium text-gray-800 hidden sm:inline">Analytics</span>
            </div>

            <!-- Selector de Cuenta/Propiedad --><div class="flex flex-col text-sm leading-tight mr-4">
                <span class="text-ga-text-gray">Todas las Cuentas > Nombre de Propiedad</span>
                <span class="font-medium text-gray-800">Todos los Datos del Sitio Web</span>
            </div>

            <!-- Barra de búsqueda --><div class="hidden md:flex items-center bg-ga-light-gray rounded-lg px-4 py-2 w-96">
                <i data-lucide="search" class="text-ga-text-gray mr-2 w-5 h-5"></i>
                <input type="text" placeholder="Intenta buscar &quot;cómo configurar Analytics&quot;" class="bg-transparent focus:outline-none w-full text-sm text-gray-700" />
            </div>
        </div>

        <!-- Iconos de la derecha y Avatar --><div class="flex items-center space-x-2">
            <button class="p-2 rounded-full hover:bg-gray-100 text-ga-text-gray" title="Compartir"><i data-lucide="share-2" class="w-5 h-5"></i></button>
            <button class="p-2 rounded-full hover:bg-gray-100 text-ga-text-gray" title="Configuración"><i data-lucide="cog" class="w-5 h-5"></i></button>
            <button class="p-2 rounded-full hover:bg-gray-100 text-ga-text-gray" title="Ayuda"><i data-lucide="help-circle" class="w-5 h-5"></i></button>
            
            <!-- Avatar de Perfil (Logo STYLIA) --><div class="w-8 h-8 rounded-full overflow-hidden cursor-pointer">
                <!-- URL de la imagen cambiada según la petición del usuario --><img src="https://raw.githubusercontent.com/RA8155/STYLIA/refs/heads/main/Stylia%20Logo.jpg" 
                     alt="Logo de Perfil STYLIA" 
                     onerror="this.onerror=null; this.src='https://placehold.co/32x32/1a73e8/ffffff?text=U';"
                     class="w-full h-full object-cover">
            </div>
        </div>
    </header>

    <!-- Contenido Principal (Cuerpo) --><div class="flex flex-1 overflow-hidden">
        
        <!-- Barra de Navegación Lateral (Sidebar) --><nav class="sidebar w-60 bg-white border-r border-gray-200 overflow-y-auto hidden md:block">
            <div class="pt-2 text-sm" id="navigation-menu">
                <!-- Los elementos del menú se inyectarán aquí por JS --></div>
        </nav>

        <!-- Contenedor de Contenido Dinámico --><main class="main-content flex-1 overflow-y-auto p-6 md:p-8">
            <!-- El título y el contenido del dashboard se inyectarán aquí --><div id="dashboard-content">
                <!-- Contenido Inicial/Activo --></div>
        </main>
    </div>

    <script>
        // --- 1. DEFINICIÓN DE CONTENIDO SIMULADO ---
        const sectionsContent = {
            // Estructura del objeto: [title, iconName, inventedHTMLContent]
            home: [
                "Inicio", "home",
                `
                <!-- Controles de Segmentación (Mantenidos en la vista principal) --><div class="flex items-center space-x-4 mb-6">
                    <button class="flex items-center bg-gray-100 text-ga-text-gray text-sm font-medium py-1 px-3 rounded-full hover:bg-gray-200">
                        <i data-lucide="users" class="w-4 h-4 mr-1"></i>
                        Todos los Usuarios
                    </button>
                    <button class="flex items-center text-ga-blue text-sm font-medium py-1 px-3 rounded-full border border-ga-blue hover:bg-blue-50">
                        <i data-lucide="plus" class="w-4 h-4 mr-1"></i>
                        Añadir comparación
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-6">

                    <!-- COLUMNA IZQUIERDA: Tarjeta de Métricas Clave y Gráfico (Colspan 2 o 3) --><div class="lg:col-span-2 xl:col-span-3 chart-container p-0">
                        
                        <!-- Header de la tarjeta con Métricas Clave --><div class="px-6 pt-6 pb-2">
                            <h3 class="text-lg font-normal text-gray-800 mb-4">Usuarios Activos (Últimos 7 Días)</h3>
                            <div class="flex space-x-8">
                                <!-- Métrica 1: Usuarios Activos (El gráfico de líneas se mueve abajo) --><div>
                                    <span class="text-sm text-ga-text-gray block mb-1">Usuarios</span>
                                    <span class="text-2xl font-medium text-gray-900 block">21K</span>
                                    <div class="flex items-center text-ga-green text-sm mt-1"> 
                                        <i data-lucide="trending-up" class="w-4 h-4 mr-1"></i> 24.4% vs. período anterior
                                    </div>
                                </div>
                                <!-- Métrica 2: Eventos Clave --><div>
                                    <span class="text-sm text-ga-text-gray block mb-1">Recuento de eventos</span>
                                    <span class="text-2xl font-medium text-gray-900 block">220K</span>
                                    <div class="flex items-center text-ga-red text-sm mt-1"> 
                                        <i data-lucide="trending-down" class="w-4 h-4 mr-1"></i> 15.3% vs. período anterior
                                    </div>
                                </div>
                                <!-- Métrica 3: Conversiones (Eventos Clave) --><div>
                                    <span class="text-sm text-ga-text-gray block mb-1">Eventos clave</span>
                                    <span class="text-2xl font-medium text-gray-900 block">1.5K</span>
                                    <div class="flex items-center text-ga-red text-sm mt-1"> 
                                        <i data-lucide="trending-down" class="w-4 h-4 mr-1"></i> 16.7% vs. período anterior
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- GRÁFICO DE LÍNEAS CONSOLIDADO (Ajustado para el aspecto GA4) --><div class="relative w-full h-64 mt-4">
                            <!-- Eje Y (Escala vertical, 6K, 4K, 2K, 0) --><div class="absolute inset-y-0 left-2 w-10 text-right text-xs text-ga-text-gray leading-tight">
                                <div class="absolute top-0 right-0">6K</div>
                                <div class="absolute top-1/4 right-0">4K</div>
                                <div class="absolute top-1/2 right-0">2K</div>
                                <div class="absolute bottom-0 right-0">0</div>
                            </div>

                            <!-- Contenedor del SVG (para el gráfico real) --><div class="absolute inset-y-0 left-12 right-6">
                                <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                                    
                                    <!-- Líneas de la Rejilla Horizontal (Simulación) --><line x1="0" y1="0" x2="100" y2="0" stroke="#e0e0e0" stroke-width="0.5" />
                                    <line x1="0" y1="33.33" x2="100" y2="33.33" stroke="#e0e0e0" stroke-width="0.5" />
                                    <line x1="0" y1="66.66" x2="100" y2="66.66" stroke="#e0e0e0" stroke-width="0.5" />
                                    <line x1="0" y1="100" x2="100" y2="100" stroke="#e0e0e0" stroke-width="0.5" />

                                    <!-- Línea del Período Anterior (Gris Punteada) - Data ajustada a 0-100 para Y --><polyline 
                                        fill="none" 
                                        stroke="#94a3b8" 
                                        stroke-width="1.5" 
                                        stroke-dasharray="2, 4" 
                                        points="0,80 20,60 40,70 60,50 80,75 100,55" 
                                        class="opacity-80"
                                    />
                                    <!-- Línea de Últimos 7 Días (Azul Sólida) - Data ajustada a 0-100 para Y --><polyline 
                                        fill="none" 
                                        stroke="#1a73e8" 
                                        stroke-width="2" 
                                        points="0,70 20,40 40,30 60,10 80,5 100,25" 
                                    />
                                </svg>
                            </div>

                            <!-- Etiquetas del Eje X (Días) --><div class="absolute left-12 right-6 bottom-0 flex justify-between text-xs text-ga-text-gray px-1 -mb-5">
                                <span>Día 1</span>
                                <span>Día 3</span>
                                <span>Día 5</span>
                                <span>Día 7</span>
                                <span>Día 9</span>
                                <span>Día 11</span>
                            </div>
                        </div>

                        <!-- Leyenda y Enlace --><div class="px-6 pt-8 flex justify-between items-end text-xs text-ga-text-gray">
                            <div class="space-y-1">
                                <div class="flex items-center">
                                    <div class="w-3 h-0.5 bg-ga-blue mr-2"></div>
                                    Últimos 7 días
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-0.5 border-t border-dashed border-gray-400 mr-2"></div>
                                    Período anterior
                                </div>
                            </div>
                            <button class="text-ga-blue flex items-center font-medium hover:underline">
                                Ver informe detallado
                                <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                            </button>
                        </div>
                    </div>

                    <!-- COLUMNA DERECHA: Usuarios Activos en los Últimos 30 Minutos --><div class="w-full lg:col-span-1 bg-white rounded-lg shadow-md p-6 border border-gray-100">
                        <h3 class="text-sm font-medium text-gray-700 mb-4">USUARIOS ACTIVOS EN LOS ÚLTIMOS 30 MINUTOS</h3>
                        <div class="text-4xl font-medium text-ga-blue mb-4">175</div>
                        <div class="text-xs text-ga-text-gray mb-2">USUARIOS POR MINUTO</div>
                        
                        <!-- Barras de simulación del gráfico de tiempo real --><div class="flex items-end h-16 w-full mb-6">
                            <div class="w-full flex h-full items-end justify-between">
                                <div class="realtime-bar h-1/3"></div><div class="realtime-bar h-1/2"></div><div class="realtime-bar h-3/4"></div>
                                <div class="realtime-bar h-1/5"></div><div class="realtime-bar h-4/5"></div><div class="realtime-bar h-2/3"></div>
                                <div class="realtime-bar h-1/4"></div><div class="realtime-bar h-3/5"></div><div class="realtime-bar h-4/5"></div>
                                <div class="realtime-bar h-1/2"></div><div class="realtime-bar h-1/3"></div><div class="realtime-bar h-2/3"></div>
                                <div class="realtime-bar h-1/4"></div><div class="realtime-bar h-3/5"></div><div class="realtime-bar h-4/5"></div>
                                <div class="realtime-bar h-1/2"></div><div class="realtime-bar h-1/3"></div><div class="realtime-bar h-2/3"></div>
                                <div class="realtime-bar h-1/4"></div><div class="realtime-bar h-3/5"></div><div class="realtime-bar h-1/4"></div>
                            </div>
                        </div>

                        <h4 class="text-xs text-ga-text-gray font-medium uppercase mt-6 mb-2">Principales países</h4>
                        <div class="space-y-2 text-sm text-gray-800">
                            <div class="flex justify-between items-center"><span>España</span><span class="font-medium">149</span></div>
                            <div class="flex justify-between items-center"><span>Italia</span><span class="font-medium">14</span></div>
                            <div class="flex justify-between items-center"><span>Francia</span><span class="font-medium">12</span></div>
                        </div>
                        
                        <button class="text-ga-blue flex items-center font-medium hover:underline text-xs mt-4 w-full justify-end">
                            Ver tiempo real
                            <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                        </button>
                    </div>

                    <!-- Tarjeta de Recomendación (Similar a la de la imagen) -->
                        <div class="bg-blue-50 border border-blue-200 rounded-lg shadow-md p-6">
                            <h4 class="text-sm font-bold text-ga-blue mb-2 flex items-center">
                                <i data-lucide="lightbulb"></i>
                                RECOMENDACIÓN
                            </h4>
                            <p class="text-xs text-gray-700">
                                Para acceder a las métricas de comportamiento perdidas, reconfigure el modo de consentimiento.
                            </p>
                            <a href="#" class="text-xs font-medium text-ga-blue hover:text-blue-700">Más información →</a>
                        </div>
                    </div>
                </div>

                <!-- Secciones Adicionales (Similar a la parte inferior de la imagen) -->
                <h2 class="text-lg font-medium text-gray-800 mt-8 mb-4">Accedido recientemente</h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="p-4 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow-md cursor-pointer">
                        <i data-lucide="settings" class="w-5 h-5 text-ga-blue mb-2"></i>
                        <p class="text-sm font-medium">Administrar</p>
                        <p class="text-xs text-ga-text-gray">hoy</p>
                    </div>
                    <div class="p-4 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow-md cursor-pointer">
                        <i data-lucide="users" class="w-5 h-5 text-ga-blue mb-2"></i>
                        <p class="text-sm font-medium">Datos demográficos</p>
                        <p class="text-xs text-ga-text-gray">ayer</p>
                    </div>
                    <div class="p-4 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow-md cursor-pointer">
                        <i data-lucide="laptop" class="w-5 h-5 text-ga-blue mb-2"></i>
                        <p class="text-sm font-medium">Detalles Dispositivos</p>
                        <p class="text-xs text-ga-text-gray">ayer</p>
                    </div>
                    <div class="p-4 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow-md cursor-pointer">
                        <i data-lucide="shopping-cart" class="w-5 h-5 text-ga-blue mb-2"></i>
                        <p class="text-sm font-medium">Recorrido de compra</p>
                        <p class="text-xs text-ga-text-gray">ayer</p>
                    </div>
                </div>

                <!-- Sección "Suggested for you" --><h2 class="text-xl font-normal text-gray-800 mt-10 mb-6">Sugerencias para ti</h2>
                    
                    <!-- Tarjeta 1: Actividad del usuario --><div class="bg-white rounded-lg shadow-md p-6 border border-gray-100 flex flex-col">
                        <div class="flex justify-between items-center">
                            <h3 class="text-md font-medium text-gray-800">Actividad del usuario</h3>
                            <button class="text-ga-text-gray hover:bg-gray-100 rounded-full p-1"><i data-lucide="more-vertical" class="w-5 h-5"></i></button>
                        </div>
                        <p class="text-xs text-ga-text-gray mb-4">Basado solo en datos de dispositivo</p>
                        
                        <!-- Tabla de cohorte simulada --><div class="overflow-x-auto flex-1">
                            <table class="w-full text-xs text-gray-700 border-collapse">
                                <thead>
                                    <tr class="text-left text-ga-text-gray">
                                        <th class="py-2 px-2 whitespace-nowrap"></th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 0</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 1</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 2</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 3</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 4</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 5</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="text-ga-blue font-medium">
                                        <td class="py-2 px-2">Todos los Usuarios</td>
                                        <td class="py-2 px-2">100.0%</td>
                                        <td class="py-2 px-2">3.6%</td>
                                        <td class="py-2 px-2">1.9%</td>
                                        <td class="py-2 px-2">1.3%</td>
                                        <td class="py-2 px-2">0.8%</td>
                                        <td class="py-2 px-2">0.4%</td>
                                    </tr>
                                    <!-- Filas de datos de cohorte con simulación de color --><tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">29 Sep - 4 Oct</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-4 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-2 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-1 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                    <tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">5 Oct - 11 Oct</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-5 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-3 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-1 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                    <tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">12 Oct - 18 Oct</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-3 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-1 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                    <tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">19 Oct - 25 Oct</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-2 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                    <tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">26 Oct - 1 Nov</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-1 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <button class="text-ga-blue flex items-center font-medium hover:underline text-xs mt-auto self-end">
                            Ver retención
                            <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                        </button>
                    </div>

                    <!-- Tarjeta 2: Sesiones por canal predeterminado de sesión --><div class="bg-white rounded-lg shadow-md p-6 border border-gray-100 flex flex-col">
                        <div class="flex justify-between items-center">
                            <h3 class="text-md font-medium text-gray-800">Sesiones por canal predeterminado de sesión</h3>
                            <button class="text-ga-text-gray hover:bg-gray-100 rounded-full p-1"><i data-lucide="more-vertical"></i></button>
                        </div>
                        <p class="text-xs text-ga-text-gray mb-4">Últimos 7 días</p>
                        
                        <div class="flex-1 overflow-x-auto">
                            <table class="w-full text-xs text-gray-700">
                                <thead>
                                    <tr class="text-left text-ga-text-gray border-b">
                                        <th class="py-2 whitespace-nowrap">Canal predeterminado de sesión</th>
                                        <th class="py-2 text-right whitespace-nowrap">Sesiones</th>
                                        <th class="py-2 text-right whitespace-nowrap"></th> <!-- Para la flecha --></tr>
                                </thead>
                                <tbody>
                                    <tr><td class="py-2">Directo</td><td class="py-2 text-right">1.0K</td><td class="py-2 text-right text-ga-red"><i data-lucide="trending-down" class="w-3 h-3 inline-block"></i> 7.4%</td></tr>
                                    <tr><td class="py-2">Búsqueda orgánica</td><td class="py-2 text-right">4.5K</td><td class="py-2 text-right text-ga-red"><i data-lucide="trending-down" class="w-3 h-3 inline-block"></i> 3.9%</td></tr>
                                    <tr><td class="py-2">Búsqueda pagada</td><td class="py-2 text-right">1K</td><td class="py-2 text-right text-ga-green"><i data-lucide="trending-up" class="w-3 h-3 inline-block"></i> 54.9%</td></tr>
                                    <tr><td class="py-2">Referidos</td><td class="py-2 text-right">390</td><td class="py-2 text-right text-ga-red"><i data-lucide="trending-down" class="w-3 h-3 inline-block"></i> 63.6%</td></tr>
                                    <tr><td class="py-2">Redes Sociales</td><td class="py-2 text-right">103</td><td class="py-2 text-right text-ga-green"><i data-lucide="trending-up" class="w-3 h-3 inline-block"></i> 18.9%</td></tr>
                                    <tr><td class="py-2">Web</td><td class="py-2 text-right">22</td><td class="py-2 text-right text-ga-green"><i data-lucide="trending-up" class="w-3 h-3 inline-block"></i> 87.8%</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <button class="text-ga-blue flex items-center font-medium hover:underline text-xs mt-auto self-end">
                            Ver adquisición de tráfico
                            <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                        </button>
                    </div>
                </div>
                `
            ],
            realtime: [
                "Tiempo Real", "zap",
                `
                <!-- COLUMNA DERECHA: Usuarios Activos en los Últimos 30 Minutos --><div class="w-full lg:col-span-1 bg-white rounded-lg shadow-md p-6 border border-gray-100">
                        <h3 class="text-sm font-medium text-gray-700 mb-4">USUARIOS ACTIVOS EN LOS ÚLTIMOS 30 MINUTOS</h3>
                        <div class="text-4xl font-medium text-ga-blue mb-4">175</div>
                        <div class="text-xs text-ga-text-gray mb-2">USUARIOS POR MINUTO</div>
                        
                        <!-- Barras de simulación del gráfico de tiempo real --><div class="flex items-end h-16 w-full mb-6">
                            <div class="w-full flex h-full items-end justify-between">
                                <div class="realtime-bar h-1/3"></div><div class="realtime-bar h-1/2"></div><div class="realtime-bar h-3/4"></div>
                                <div class="realtime-bar h-1/5"></div><div class="realtime-bar h-4/5"></div><div class="realtime-bar h-2/3"></div>
                                <div class="realtime-bar h-1/4"></div><div class="realtime-bar h-3/5"></div><div class="realtime-bar h-4/5"></div>
                                <div class="realtime-bar h-1/2"></div><div class="realtime-bar h-1/3"></div><div class="realtime-bar h-2/3"></div>
                                <div class="realtime-bar h-1/4"></div><div class="realtime-bar h-3/5"></div><div class="realtime-bar h-4/5"></div>
                                <div class="realtime-bar h-1/2"></div><div class="realtime-bar h-1/3"></div><div class="realtime-bar h-2/3"></div>
                                <div class="realtime-bar h-1/4"></div><div class="realtime-bar h-3/5"></div><div class="realtime-bar h-1/4"></div>
                            </div>
                        </div>

                        <h4 class="text-xs text-ga-text-gray font-medium uppercase mt-6 mb-2">Principales países</h4>
                        <div class="space-y-2 text-sm text-gray-800">
                            <div class="flex justify-between items-center"><span>España</span><span class="font-medium">149</span></div>
                            <div class="flex justify-between items-center"><span>Italia</span><span class="font-medium">14</span></div>
                            <div class="flex justify-between items-center"><span>Francia</span><span class="font-medium">12</span></div>
                        </div>
                        
                        <button class="text-ga-blue flex items-center font-medium hover:underline text-xs mt-4 w-full justify-end">
                            Ver tiempo real
                            <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                        </button>
                    </div>
                `
            ],
            acquisition: [
                "Adquisición", "trending-up",
                `
                <!-- Título y Acciones del Informe -->
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h1 class="text-2xl font-semibold text-gray-800">Resumen de adquisiciones</h1>
                    <div class="flex space-x-4 mt-2 text-sm">
                        <div class="text-ga-blue font-medium cursor-pointer border-b-2 border-ga-blue">Todos los usuarios</div>
                        <div class="text-gray-500 cursor-pointer">Añadir comparación</div>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="text-sm text-gray-600">Personalizado: 10 Oct - 11 Nov 2025</span>
                    <button class="text-gray-500 hover:text-gray-700"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg></button>
                </div>
            </div>

            <!-- Fila de Tarjetas de Resumen (4 métricas principales) -->
            <div class="grid grid-cols-4 gap-4 mb-6">

                <!-- Tarjeta 1: Usuarios Activos (AÑADIDO SPARKLINE) -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex justify-between items-start">
                        <p class="text-sm font-medium text-gray-500">Usuarios activos</p>
                        <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-2.43 0-4.8 1.21-6 3.5-.18.35-.18.77 0 1.12C7.2 16.79 9.57 18 12 18s4.8-1.21 6-3.5c.18-.35.18-.77 0-1.12-1.2-2.29-3.57-3.5-6-3.5z"/></svg>
                    </div>
                    <div class="text-3xl font-bold text-gray-900 mt-2">88</div>
                    <p class="text-sm text-green-600 mt-1 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>
                        <span class="font-semibold">2.4%</span> vs el periodo anterior
                    </p>
                    <!-- Sparkline para Usuarios Activos (Verde, tendencia positiva) -->
                    <div class="h-10 mt-2">
                        <svg viewBox="0 0 100 30" class="w-full h-full" preserveAspectRatio="none">
                            <polyline points="0,25 20,20 40,22 60,10 80,15 100,5" fill="none" stroke="#0F9D58" stroke-width="2.5"></polyline>
                        </svg>
                    </div>
                </div>

                <!-- Tarjeta 2: Usuarios Nuevos (AÑADIDO SPARKBAR) -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex justify-between items-start">
                        <p class="text-sm font-medium text-gray-500">Usuarios nuevos</p>
                        <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-2.43 0-4.8 1.21-6 3.5-.18.35-.18.77 0 1.12C7.2 16.79 9.57 18 12 18s4.8-1.21 6-3.5c.18-.35.18-.77 0-1.12-1.2-2.29-3.57-3.5-6-3.5z"/></svg>
                    </div>
                    <div class="text-3xl font-bold text-gray-900 mt-2">89</div>
                    <p class="text-sm text-red-600 mt-1 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                        <span class="font-semibold">-1.1%</span> vs el periodo anterior
                    </p>
                    <!-- Sparkbar para Usuarios Nuevos (Barras grises, tendencia plana/negativa) -->
                    <div class="h-10 mt-2 flex items-end justify-between space-x-0.5">
                        <div class="w-1/12 bg-gray-300 h-[50%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[70%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[65%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[40%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[80%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[55%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[90%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[30%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[60%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[50%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[85%] rounded-t-sm"></div>
                        <div class="w-1/12 bg-gray-300 h-[75%] rounded-t-sm"></div>
                    </div>
                </div>
                
                <!-- Tarjeta 3: Usuarios Activos en los últimos 30 minutos (Sin cambios) -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex justify-between items-start">
                        <p class="text-sm font-medium text-gray-500">USUARIOS ACTIVOS DURANTE LOS ÚLTIMOS 30 MINUTOS</p>
                        <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-2.43 0-4.8 1.21-6 3.5-.18.35-.18.77 0 1.12C7.2 16.79 9.57 18 12 18s4.8-1.21 6-3.5c.18-.35.18-.77 0-1.12-1.2-2.29-3.57-3.5-6-3.5z"/></svg>
                    </div>
                    <div class="text-xl font-bold text-ga-blue mt-2">50</div>
                    <div class="mt-3 space-y-1">
                    </div>
                    <a href="#" class="text-sm text-ga-blue mt-4 block hover:underline">Ver en tiempo real</a>
                </div>

                <!-- Tarjeta 4: Usuarios nuevos por Primer grupo de canales principales (Sin cambios) -->
                <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex justify-between items-start">
                        <p class="text-sm font-medium text-gray-500">Usuarios nuevos por Primer grupo de canales principales</p>
                        <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-2.43 0-4.8 1.21-6 3.5-.18.35-.18.77 0 1.12C7.2 16.79 9.57 18 12 18s4.8-1.21 6-3.5c.18-.35.18-.77 0-1.12-1.2-2.29-3.57-3.5-6-3.5z"/></svg>
                    </div>
                    <p class="text-sm text-gray-900 mt-2">USUARIOS NUEVOS</p>
                    <ul class="text-sm mt-1 space-y-0.5">
                        <li class="flex justify-between text-gray-700"><span>Directo</span> <span class="font-medium">84</span></li>
                        <li class="flex justify-between text-gray-700"><span>Búsqueda pagada</span> <span class="font-medium">3</span></li>
                        <li class="flex justify-between text-gray-700"><span>Búsqueda Orgánica</span> <span class="font-medium">2</span></li>
                        <li class="flex justify-between text-gray-700"><span>Referidos</span> <span class="font-medium">2</span></li>
                    </ul>
                    <a href="#" class="text-sm text-ga-blue mt-4 block hover:underline">Ver adquisición de usuarios</a>
                </div>

            </div>
            
            <!-- Gráfico principal (Línea) y Distribución (Donut) -->
            <div class="grid grid-cols-12 gap-4 mb-6">
                
                <!-- Columna principal (Gráfico de Líneas) -->
                <div class="col-span-8 bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-medium text-gray-700">Usuarios activos por minuto</h2>
                        <span class="text-ga-blue font-medium text-sm cursor-pointer hover:underline">Ver más</span>
                    </div>

                    <!-- Contenedor del Gráfico de Líneas (SVG) -->
                    <div class="relative chart-container">
                        <!-- Líneas del Eje Y (Fondo gris claro) -->
                        <div class="absolute inset-0 z-0">
                            <div class="relative h-full pt-1">
                                <div class="absolute w-full h-[150px] left-10 border-l border-gray-300">
                                    <div class="absolute top-0 w-full border-t border-dashed border-gray-300"></div>
                                    <div class="absolute top-[30px] w-full border-t border-dashed border-gray-300"></div>
                                    <div class="absolute top-[60px] w-full border-t border-dashed border-gray-300"></div>
                                    <div class="absolute top-[90px] w-full border-t border-dashed border-gray-300"></div>
                                    <div class="absolute top-[120px] w-full border-t border-dashed border-gray-300"></div>
                                    <div class="absolute top-[150px] w-full border-t border-dashed border-gray-300"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Etiquetas del Eje Y -->
                        <div class="absolute left-2 top-0 text-xs text-gray-500 space-y-[21px] flex flex-col justify-end h-[150px] pb-1">
                            <div>50</div>
                            <div>40</div>
                            <div>30</div>
                            <div>20</div>
                            <div>10</div>
                            <div>0</div>
                        </div>

                        <!-- SVG del Gráfico de Líneas (150px de alto para 50 unidades) -->
                        <svg viewBox="0 0 400 150" class="w-full h-[150px] ml-10 relative z-10" preserveAspectRatio="none">
                            <!-- Relleno del área (Area Chart) -->
                            <polygon points="0,150 0,135 100,126 200,15 300,114 400,90 400,150" fill="#1E88E5" opacity="0.1"></polygon>
                            <!-- Línea principal -->
                            <polyline points="0,135 100,126 200,15 300,114 400,90" fill="none" stroke="#1E88E5" stroke-width="2.5"></polyline>
                            <!-- Puntos de datos -->
                            <circle cx="0" cy="135" r="3.5" fill="#1E88E5"></circle>
                            <circle cx="100" cy="126" r="3.5" fill="#1E88E5"></circle>
                            <circle cx="200" cy="15" r="3.5" fill="#1E88E5"></circle>
                            <circle cx="300" cy="114" r="3.5" fill="#1E88E5"></circle>
                            <circle cx="400" cy="90" r="3.5" fill="#1E88E5"></circle>
                        </svg>

                        <!-- Simulación de Tooltip y línea de hover -->
                        <div class="absolute inset-0 ml-10 cursor-crosshair">
                            <div class="tooltip-line absolute h-full w-0.5 bg-gray-500 opacity-0 transition-opacity pointer-events-none" style="left: 60%; top: 0;"></div>
                            <div class="tooltip-box absolute top-1/2 left-[60%] -translate-x-1/2 p-2 bg-white border border-gray-300 rounded shadow-lg text-xs opacity-0 transition-all pointer-events-none" style="transform: translate(0, -50%);">
                                <strong>10 JUL</strong><br>
                                Usuarios: 12
                            </div>
                        </div>
                    </div>
                    
                    <!-- Etiquetas del Eje X -->
                    <div class="flex justify-between text-xs text-gray-500 mt-2 ml-10">
                        <span>JUN</span>
                        <span>1 OCT</span>
                        <span>7 NOV</span>
                        <span>11 NOV</span>
                    </div>
                </div>

                <!-- Columna lateral (Distribución de usuarios - Donut Chart Simulado) -->
                <div class="col-span-4 bg-white p-4 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-medium text-gray-700">Distribución de usuarios</h2>
                        <svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-2.43 0-4.8 1.21-6 3.5-.18.35-.18.77 0 1.12C7.2 16.79 9.57 18 12 18s4.8-1.21 6-3.5c.18-.35.18-.77 0-1.12-1.2-2.29-3.57-3.5-6-3.5z"/></svg>
                    </div>
                    
                    <div class="flex justify-center items-center h-[200px]">
                        <!-- SVG del Gráfico de Donut -->
                        <svg viewBox="0 0 100 100" class="w-48 h-48">
                            <g transform="translate(50,50)">
                                <!-- Segmento 1: Direct (50%) -->
                                <circle r="40" fill="transparent" stroke="#1E88E5" stroke-width="20" stroke-dasharray="125.66 125.66" stroke-dashoffset="0" transform="rotate(-90)"></circle>
                                <!-- Segmento 2: Organic Search (30%) -->
                                <circle r="40" fill="transparent" stroke="#F4B400" stroke-width="20" stroke-dasharray="75.4 125.66" stroke-dashoffset="-125.66" transform="rotate(-90)"></circle>
                                <!-- Segmento 3: Paid Search (15%) -->
                                <circle r="40" fill="transparent" stroke="#D50000" stroke-width="20" stroke-dasharray="37.7 125.66" stroke-dashoffset="-201.06" transform="rotate(-90)"></circle>
                                <!-- Segmento 4: Referral (5%) -->
                                <circle r="40" fill="transparent" stroke="#0F9D58" stroke-width="20" stroke-dasharray="12.56 125.66" stroke-dashoffset="-238.76" transform="rotate(-90)"></circle>
                                <!-- Círculo interior blanco para crear el donut -->
                                <circle r="20" fill="white"></circle>
                                <text x="0" y="5" text-anchor="middle" font-size="10" fill="#333" font-weight="bold">89</text>
                                <text x="0" y="15" text-anchor="middle" font-size="5" fill="#555">Usuarios</text>
                            </g>
                        </svg>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 mt-4">
                        <span>Canal</span>
                        <span>Usuarios</span>
                    </div>
                </div>

            </div>
                `
            ],
            engagement: [
                "Interacción", "activity",
                `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100 text-center">
                        <p class="text-5xl font-bold text-ga-blue">68.5%</p>
                        <p class="text-sm text-ga-text-gray mt-2">Tasa de Interacción</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100 text-center">
                        <p class="text-5xl font-bold text-gray-800">1m 15s</p>
                        <p class="text-sm text-ga-text-gray mt-2">Tiempo Promedio de Interacción</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100 text-center">
                        <p class="text-5xl font-bold text-gray-800">4.2</p>
                        <p class="text-sm text-ga-text-gray mt-2">Vistas por Sesión</p>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100 mt-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Páginas y Pantallas más Vistas</h3>
                    <ul class="space-y-2 text-sm text-gray-700">
                        <li><span class="font-medium text-ga-blue">/product/new-collection:</span> 2.512 vistas</li>
                        <li><span class="font-medium text-ga-blue">/home:</span> 1.890 vistas</li>
                        <li><span class="font-medium text-ga-blue">/blog/post-seo:</span> 1.050 vistas</li>
                    </ul>
                </div>
                `
            ],
            monetization: [
                "Monetización", "dollar-sign",
                `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Resumen Financiero (Últimos 30 Días)</h3>
                        <p class="text-5xl font-bold text-ga-green mb-2">376.854€</p>
                        <p class="text-lg text-ga-text-gray">Ingresos Totales</p>
                        <p class="text-3xl font-bold text-gray-800 mt-4">5.563</p>
                        <p class="text-lg text-ga-text-gray">Transacciones de E-commerce</p>
                    </div>
                    <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Rendimiento de Productos</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li><span class="font-medium text-ga-blue">Armario Negro Espacial:</span> 10.000€</li>
                            <li><span class="font-medium text-ga-blue">Armario Blanco Suave:</span> 9.200€</li>
                            <li><span class="font-medium text-ga-blue">Armario Cálido Natural:</span> 15.650€</li>
                        </ul>
                    </div>
                </div>
                `
            ],
            retention: [
                "Retención", "refresh-ccw",
                `
                    
                    <!-- Tarjeta 1: Actividad del usuario --><div class="bg-white rounded-lg shadow-md p-6 border border-gray-100 flex flex-col">
                        <div class="flex justify-between items-center">
                            <h3 class="text-md font-medium text-gray-800">Actividad del usuario</h3>
                            <button class="text-ga-text-gray hover:bg-gray-100 rounded-full p-1"><i data-lucide="more-vertical" class="w-5 h-5"></i></button>
                        </div>
                        <p class="text-xs text-ga-text-gray mb-4">Basado solo en datos de dispositivo</p>
                        
                        <!-- Tabla de cohorte simulada --><div class="overflow-x-auto flex-1">
                            <table class="w-full text-xs text-gray-700 border-collapse">
                                <thead>
                                    <tr class="text-left text-ga-text-gray">
                                        <th class="py-2 px-2 whitespace-nowrap"></th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 0</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 1</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 2</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 3</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 4</th>
                                        <th class="py-2 px-2 whitespace-nowrap">Semana 5</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="text-ga-blue font-medium">
                                        <td class="py-2 px-2">Todos los Usuarios</td>
                                        <td class="py-2 px-2">100.0%</td>
                                        <td class="py-2 px-2">3.6%</td>
                                        <td class="py-2 px-2">1.9%</td>
                                        <td class="py-2 px-2">1.3%</td>
                                        <td class="py-2 px-2">0.8%</td>
                                        <td class="py-2 px-2">0.4%</td>
                                    </tr>
                                    <!-- Filas de datos de cohorte con simulación de color --><tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">29 Sep - 4 Oct</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-4 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-2 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-1 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                    <tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">5 Oct - 11 Oct</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-5 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-3 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-1 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                    <tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">12 Oct - 18 Oct</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-3 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-1 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                    <tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">19 Oct - 25 Oct</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-2 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                    <tr class="text-gray-700">
                                        <td class="py-2 px-2 whitespace-nowrap">26 Oct - 1 Nov</td>
                                        <td class="py-2 px-2 bg-blue-50 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-1 cohort-cell-text-dark"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                        <td class="py-2 px-2 cohort-cell-bg-0 cohort-cell-text"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <button class="text-ga-blue flex items-center font-medium hover:underline text-xs mt-auto self-end">
                            Ver retención
                            <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                        </button>
                    </div>
                `
            ],
            demographics: [
                "Datos demográficos", "users",
                `
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Usuarios por Ubicación Geográfica</h3>
                    <ul class="space-y-2 text-sm text-gray-700">
                        <li><span class="font-medium text-ga-blue">España:</span> 40% (Usuarios: 8,400)</li>
                        <li><span class="font-medium text-ga-blue">México:</span> 25% (Usuarios: 5,250)</li>
                        <li><span class="font-medium text-ga-blue">Argentina:</span> 15% (Usuarios: 3,150)</li>
                        <li><span class="font-medium text-ga-blue">Otros:</span> 20% (Usuarios: 4,200)</li>
                    </ul>
                </div>
                `
            ],
            technology: [
                "Tecnología", "laptop",
                `
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Usuarios por Categoría de Dispositivo</h3>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div class="p-4 border rounded-lg"><p class="text-4xl font-bold text-ga-blue">60%</p><p class="text-sm text-ga-text-gray mt-2">Móvil</p></div>
                        <div class="p-4 border rounded-lg"><p class="text-4xl font-bold text-gray-800">35%</p><p class="text-sm text-ga-text-gray mt-2">Escritorio</p></div>
                        <div class="p-4 border rounded-lg"><p class="text-4xl font-bold text-gray-800">5%</p><p class="text-sm text-ga-text-gray mt-2">Tablet</p></div>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-800 mt-6 mb-4">Principales Navegadores</h3>
                    <ul class="space-y-1 text-sm text-gray-700">
                        <li>Chrome: 70%</li>
                        <li>Safari: 15%</li>
                        <li>Firefox: 10%</li>
                    </ul>
                </div>
                `
            ],
            conversions: [
                "Conversiones", "flag",
                `
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Eventos de Conversión Clave (Últimos 30 Días)</h3>
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-ga-text-gray uppercase tracking-wider">Evento</th><th class="px-6 py-3 text-left text-xs font-medium text-ga-text-gray uppercase tracking-wider">Recuento</th><th class="px-6 py-3 text-left text-xs font-medium text-ga-text-gray uppercase tracking-wider">Ingresos</th></tr></thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-ga-blue">purchase</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">1,500</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">€45,800</td></tr>
                            <tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-ga-blue">generate_lead</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">2,100</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">N/A</td></tr>
                            <tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-ga-blue">form_submit</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">4,500</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">N/A</td></tr>
                        </tbody>
                    </table>
                </div>
                `
            ],
            events: [
                "Todos los eventos", "list-ordered",
                `
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Lista Completa de Eventos</h3>
                    <ul class="space-y-1 text-sm text-gray-700">
                        <li><span class="font-medium text-ga-blue">page_view:</span> 512,000</li>
                        <li><span class="font-medium text-ga-blue">session_start:</span> 125,487</li>
                        <li><span class="font-medium text-ga-blue">first_visit:</span> 18,100</li>
                        <li><span class="font-medium text-ga-blue">add_to_cart:</span> 5,800</li>
                        <li><span class="font-medium text-ga-blue">view_item:</span> 15,200</li>
                        <li><span class="font-medium text-ga-blue">download:</span> 500</li>
                    </ul>
                </div>
                `
            ],
            analysis: [
                "Explorar", "layers-3",
                `
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Análisis de Embudo de Ventas (Simulado)</h3>
                    <div class="space-y-4 text-gray-700">
                        <div class="p-3 border rounded-lg bg-gray-50"><span class="font-bold">Paso 1: Inicio de Sesión</span> <span class="float-right text-ga-blue">10,000 usuarios (100%)</span></div>
                        <div class="p-3 border rounded-lg bg-gray-50"><span class="font-bold">Paso 2: Ver Producto</span> <span class="float-right text-orange-500">8,500 usuarios (85% Retención)</span></div>
                        <div class="p-3 border rounded-lg bg-gray-50"><span class="font-bold">Paso 3: Añadir a Cesta</span> <span class="float-right text-red-500">4,250 usuarios (50% Retención)</span></div>
                        <div class="p-3 border rounded-lg bg-gray-50"><span class="font-bold">Paso 4: Compra</span> <span class="float-right text-green-600">1,500 usuarios (35% Retención)</span></div>
                    </div>
                    <p class="text-sm text-ga-text-gray mt-6">La pérdida más grande se produce entre "Ver Producto" y "Añadir a Cesta".</p>
                </div>
                `
            ],
            admin: [
                "Administrar", "settings",
                `
                <div class="bg-white rounded-lg shadow-md p-6 border border-gray-100">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Configuración de la Propiedad</h3>
                    <div class="space-y-4 text-gray-700">
                        <div class="border-b border-gray-200 pb-3"><span class="font-medium text-ga-text-gray">ID de Propiedad GA4:</span> <span class="font-mono text-ga-blue">G-STYLIA-999</span></div>
                        <div class="border-b border-gray-200 pb-3"><span class="font-medium text-ga-text-gray">Flujo de Datos:</span> Web (www.stylia.com)</div>
                        <div class="border-b border-gray-200 pb-3"><span class="font-medium text-ga-text-gray">Zona Horaria:</span> Madrid, España (+01:00)</div>
                        <div class="border-b border-gray-200 pb-3"><span class="font-medium text-ga-text-gray">Recolección de Datos:</span> Activa</div>
                    </div>
                    <button class="mt-6 bg-ga-blue text-white py-2 px-4 rounded-full text-sm font-medium hover:bg-blue-600 transition-colors">
                        Gestionar Acceso a Propiedad
                    </button>
                </div>
                `
            ]
        };

        // --- 2. GENERACIÓN DEL MENÚ LATERAL ---
        const menuStructure = [
            { text: "Inicio", id: "home", icon: "home" },
            { text: "Tiempo Real", id: "realtime", icon: "activity" },
            { group: "Ciclo de vida" },
            { text: "Adquisición", id: "acquisition", icon: "trending-up" },
            { text: "Interacción", id: "engagement", icon: "zap" },
            { text: "Monetización", id: "monetization", icon: "dollar-sign" },
            { text: "Retención", id: "retention", icon: "refresh-ccw" },
            { group: "Configuración" },
            { text: "Administrar", id: "admin", icon: "cog" },
        ];

        function generateMenuItem(item, isActive) {
            if (item.group) {
                return `<h3 class="text-xs text-ga-text-gray font-medium uppercase px-6 pt-4 pb-1">${item.group}</h3>`;
            }
            const activeClass = isActive ? 'active-link' : 'text-ga-text-gray hover:bg-gray-100';
            const iconClass = isActive ? 'text-ga-blue' : 'text-ga-text-gray';
            
            return `
                <a href="#" data-section="${item.id}" class="nav-link flex items-center py-2 px-6 cursor-pointer transition-colors ${activeClass}">
                    <i data-lucide="${item.icon}" class="w-5 h-5 mr-3 ${iconClass}"></i>
                    <span>${item.text}</span>
                </a>
            `;
        }

        function buildMenu() {
            const menuHtml = menuStructure.map(item => generateMenuItem(item, item.id === 'home')).join('');
            document.getElementById('navigation-menu').innerHTML = menuHtml;
        }


        // --- 3. LÓGICA DE NAVEGACIÓN Y RENDERIZADO ---
        function renderContent(sectionId) {
            const [title, icon, content] = sectionsContent[sectionId];
            const contentArea = document.getElementById('dashboard-content');
            
            contentArea.innerHTML = `
                <h1 class="text-2xl font-normal text-gray-800 mb-6 flex items-center">
                    <i data-lucide="${icon}" class="w-6 h-6 mr-3 text-ga-text-gray"></i>
                    ${title}
                    <!-- Botón de expandir/contraer (simulado) --><button class="ml-auto p-2 rounded-full hover:bg-gray-100 text-ga-text-gray">
                        <i data-lucide="maximize-2" class="w-5 h-5"></i>
                    </button>
                </h1>
                ${content}
            `;
            // Vuelve a renderizar los iconos de Lucide después de inyectar el nuevo HTML
            lucide.createIcons();
        }

        function handleNavigation(event) {
            event.preventDefault();
            const target = event.currentTarget;
            const sectionId = target.getAttribute('data-section');

            // 1. Quitar estado activo de todos los enlaces
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active-link');
                // Se busca el icono para cambiarle la clase
                const icon = link.querySelector('.lucide');
                if (icon) {
                    icon.classList.remove('text-ga-blue');
                    icon.classList.add('text-ga-text-gray');
                }
                link.classList.add('text-ga-text-gray', 'hover:bg-gray-100');
            });

            // 2. Aplicar estado activo al enlace actual
            target.classList.add('active-link');
            target.classList.remove('text-ga-text-gray', 'hover:bg-gray-100');
            const targetIcon = target.querySelector('.lucide');
            if (targetIcon) {
                targetIcon.classList.add('text-ga-blue');
                targetIcon.classList.remove('text-ga-text-gray');
            }

            // 3. Renderizar el contenido
            renderContent(sectionId);
        }


        // --- 4. INICIALIZACIÓN ---
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Construir el menú
            buildMenu();

            // 2. Cargar el contenido 'Inicio' por defecto
            renderContent('home');

            // 3. Asignar listeners a los nuevos enlaces
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', handleNavigation);
            });
            
            // 4. Renderizar los iconos iniciales (del encabezado y el contenido inicial)
            lucide.createIcons();
        });
    </script>
</body>
</html>
